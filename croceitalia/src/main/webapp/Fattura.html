<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8">
    <meta charset="utf-8">
    <title>Croce Bianca Italia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="ico/favicon.png">
  <style type="text/css"></style><!--The following script tag downloads a font from the Adobe Edge Web Fonts server for use within the web page. We recommend that you do not modify it.--><script>var __adobewebfontsappname__="dreamweaver"</script><script src="http://use.edgefonts.net/arizonia:n4:default.js" type="text/javascript"></script>
</head>
<style>
table {
    border-collapse: collapse;
    width: 100%;
}

th, td {
    text-align: left;
    padding: 8px;
}
td{
	padding-bottom: 0px;
}
tr:nth-child(even){background-color: #f2f2f2}

th {
	text-align:center;
    background-color: #5BC0DE;
    color: white;
}
.num_sedute{
	width: 48px;
}
.mese_sedute{
	width: 93px;
}
.km_percorsi{
	width: 48px;
}
.trasportato{
	width:240px;
}
.percorso{
	width: 225px;
}
.num_ore{
	width:50px;
}
.quota_fissa{
	width:60px;
}
.dirittto_uscita{
	width:60px;
}
.importo{
	width:90px;
}

/* body{
	
	background-color:#A6A6A6;
	} */


.overlay {
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.7);
  transition: opacity 500ms;
  visibility: hidden;
  opacity: 0;
}

.overlay:target {
  visibility: visible;
  opacity: 1;
}

.popup {
  margin: 70px auto;
  padding: 20px;
  background: #fff;
  border-radius: 5px;
  width: 80%;
  position: relative;
  transition: all 1s ease-in-out;
}

.popup h2 {
  margin-top: 0;
  color: #333;
  font-family: Tahoma, Arial, sans-serif;
}
.popup .close {
  position: absolute;
  top: 20px;
  right: 30px;
  transition: all 200ms;
  font-size: 30px;
  font-weight: bold;
  text-decoration: none;
  color: #333;
}
.popup .close:hover {
  color: #06D85F;
}
.popup .content {
  max-height: 30%;
  overflow: auto;
}

@media screen and (max-width: 700px){
  .box{
    width: 70%;
  }
  .popup{
    width: 70%;
  }
}
</style>

  <body cz-shortcut-listen="true">

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="#">Croce Italia</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">
      <h1>Tabella Croce Italia</h1>
   	  <article class="tabella">
      <table width="100%" border="0">
  <tbody>
    <tr>
      <th scope="col" >Num sedute</th>
      <th scope="col">Mese sedute</th>
      <th scope="col">Km Percorsi</th>
      <th scope="col" class="trasportato">Nome trasportato</th>
      <th scope="col" class="percorso">Percorso</th>
      <th scope="col">N° ore sosta</th>
      <th scope="col">Quota fissa</th>
      <th scope="col">Diritto di uscita</th>
      <th scope="col">IMPORTO</th>
    </tr>
     <tr>
     
      <td>
       	<input type="hidden" nome="id_riga1" id="id_riga1" value="">
      	<input type="text" nome="num_sedute1" id="num_sedute1" class="num_sedute" size="5" maxlength="2">
      </td>
      <td><input type="text" nome="mese_sedute1" id="mese_sedute1" class="mese_sedute" value=""></td>
      <td><input type="text" nome="km_percorsi1" id="km_percorsi1" class="km_percorsi" value=""></td>
      <td>
       	<input type="hidden" nome="fk_paziente1" id="fk_paziente1" value="">
      	<input type="text" nome="trasportato1" id="trasportato1" class="trasportato" value="" onclick="mostra(1)" readonly>
      </td>
      <td>
      	<input type="hidden" nome="fk_struttura1" id="fk_struttura1" value="">
      	<input type="text" nome="percorso1" id="percorso1" class="percorso" value=""  onclick="percorso(1)" readonly >
      </td>
      <td><input type="text" nome="num_ore1" id="num_ore1" class="num_ore"  value=""></td>
      <td><input type="text" nome="quota_fissa1" id="quota_fissa1" class="quota_fissa" value="" ></td>
      <td><input type="text" nome="dirittto_uscita1" id="dirittto_uscita1" class="dirittto_uscita" value="" ></td>
      <td><input type="text" nome="importo1" id="importo1"  class="importo" value="" ></td>
    </tr>
     <tr>
     <td>
       	<input type="hidden" nome="id_riga2" id="id_riga2" value="">
      	<input type="text" nome="num_sedute2" id="num_sedute2" class="num_sedute" size="5" maxlength="2">
      </td>
      <td><input type="text" nome="mese_sedute2" id="mese_sedute2" class="mese_sedute" value=""></td>
      <td><input type="text" nome="km_percorsi2" id="km_percorsi2" class="km_percorsi" value=""></td>
      <td>
       	<input type="hidden" nome="fk_paziente2" id="fk_paziente2" value="">
      	<input type="text" nome="trasportato2" id="trasportato2" class="trasportato" value="" onclick="mostra(2)" readonly>
      </td>
      <td>
      	<input type="hidden" nome="fk_struttura2" id="fk_struttura2" value="">
      	<input type="text" nome="percorso2" id="percorso2" class="percorso" value="" >
      </td>
      <td><input type="text" nome="num_ore2" id="num_ore2" class="num_ore"  value=""></td>
      <td><input type="text" nome="quota_fissa2" id="quota_fissa2" class="quota_fissa" value="" ></td>
      <td><input type="text" nome="dirittto_uscita2" id="dirittto_uscita2" class="dirittto_uscita" value="" ></td>
      <td><input type="text" nome="importo2" id="importo2"  class="importo" value="" ></td>
    </tr>
    <tr>
      <td><input type="text" nome="num_sedute1"  class="num_sedute" size="5" maxlength="2"></td>
      <td><input type="text" nome="mese_sedute1" class="mese_sedute" value=""></td>
      <td><input type="text" nome="km_percorsi1" class="km_percorsi" value=""></td>
      <td><input type="text" nome="trasportato1"  class="trasportato" value="" ></td>
      <td><input type="text" nome="percorso1"  class="percorso" value="" ></td>
      <td><input type="text" nome="num_ore1"  class="num_ore"  value=""></td>
      <td><input type="text" nome="quota_fissa1" class="quota_fissa" value="" ></td>
      <td><input type="text" nome="dirittto_uscita1" class="dirittto_uscita" value="" ></td>
      <td><input type="text" nome="importo1"   class="importo" value="" ></td>
    </tr>
<!--  -->
  </tbody>
</table>


<div id="popup1" class="overlay">
	<div class="popup">
		<h2>Trasportato</h2>
		<a class="close" href="#" id="finisci">&times;</a>
		<div class="content">
            <form id="insForm" name="insForm" action="" method="post" >

                   <table>
                        <tbody>
	                        <tr class="prop">
	                            <td valign="top" class="tipo">Patologia</td>
	                            <td valign="top" class="value">
	                                <select id="fk_id_patologia" name="fk_id_patologia" required>
	                                    <option value="">Seleziona..</option>
	                                        <option value="1">diabete</option>
	                                </select>
	                            </td>
	                        </tr>
                            <tr class="prop">
                                <td align="top" class="name"><label for="cognome">Cognome Nome</label></td>                             
                                <td align="top" class="value">
                                    <input type="text" id="cognome" name="cognome"  size="28" maxlength="60" value="" placeholder="Cognome" />
                                    <input type="text" id="nome" name="nome"  size="28" maxlength="60" value="" placeholder="Nome"  />
                                </td> 
                            </tr>
                            <tr class="prop">
                             	<td align="top" class="telefono"><label for="telefono">Telefono</label></td>
                                <td align="top" class="value">
                                    <input type="text" id="telefono1" name="telefono1"  size="28" maxlength="60" value=""  placeholder="Telefono principale"  />
                                    <input type="text" id="telefono2" name="telefono2"  size="28" maxlength="60" value=""  placeholder="Secondo telefono"  />
                             	</td>
                            </tr>
                            <tr class="prop" >
                             	<td align="top" class="telefono1"><label for="telefono2"> Indirizzo</label></td>
                                <td align="top" class="value" >
                                    <input type="text" id="via" name="via" size="50" maxlength="50" value="" placeholder="Via"   />
                                    <input type="text" id="cap" name="cap"  size="7" maxlength="5" value="" placeholder="Cap"   />
                                    <input type="text" id="comune" name="comune"  size="30" maxlength="30" value="" placeholder="Comune"   />
                                    
                                    <input type="text" id="provincia" name="provincia"  size="5" maxlength="2" value="" placeholder="Provincia"   />
                             	</td>
                            </tr>
                            <tr class="prop">
                                <td valign="top" class="sesso"><label for="sesso"> Sesso</label></td>
                                <td valign="top" class="value">
                                 	<ul style="list-style: none;padding-left: 0px;">
                  					<li>
                    					<input type="radio" id="f-option" name="sesso" value="M">
                    					<label for="f-option">Maschio</label>
                    					                  
                    					<input type="radio" id="s-option" name="sesso" value="F">
                    					<label for="s-option">Femmina</label>
                    				</li>
                    				</ul>
                                </td>
                            </tr>
                            
     						<tr class="prop">
                                <td valign="top" class="data_nascita"><label for="data_nascita"> Data di nascita</label></td>
                                <td valign="top" class="value">
                                    <input type="text" id="data_nascita" name="data_nascita"  size="28" maxlength="60" />
                                </td>
                            </tr>
                        </tbody>                            
                    </table>
                    <br/>
                <div class="buttons">
                    <span class="button">
                    	<input type="button" name="create" class="save" value="Create" id="create" onclick="controlli()"/><!-- Verrà richiamato il valore su Ajax  -->
                    </span>
                </div>
            </form>

		</div>
	</div>
</div>
      </article>
    </div> <!-- /container -->


<div id="popup2" class="overlay">
	<div class="popup">
		<h2>Percorso</h2>
		<a class="close" href="#" id="finisci">&times;</a>
		<div class="content">
 <form id="mezzoForm" name="mezzoForm" action="/edit/mezzo/save" method="post" >

                   <table>
                        <tbody>
                        	<tr class="prop">
                            	<td align="top" class="name"><label for="t">Tipologia mezzo</label></td>
                            	<td align="top" class="value">
									<select id ="fk_tipo_mezzo" name = "fk_tipo_mezzo">
										  <option value="">Seleziona..</option>
	                                        <option value="1">ambulanza</option>
									</select>
							</tr>
                            <tr class="prop">
                                <td align="top" class="name"><label for="cognome">Targa</label></td>                             
                                <td align="top" class="value">
                                    <input type="text" id="targa" name="targa"  size="12" maxlength="7" value="" placeholder="Targa"  />
                                </td> 
                            </tr>
                       
                        </tbody>                            
                    </table>
                    <br/>
                <div class="buttons">
                    <span class="button"><input type="button" name="create" class="save" value="Create" id="create"  /></span>
                </div>
            </form>

		</div>
	</div>
</div>


  </body>
</html>

<script type="text/javascript" src="/js/asso_beans_client.js"></script>
<script type="text/javascript" src="/js/controlli.js"></script>

<script>
var indice = 0;

function mostra(ind) {
	indice = ind;
	document.location = '#popup1';
}

function percorso(ind) {
	indice = ind;
	
	if(trasportato1.value == "")
		alert("Non puoi inserire nulla!");
		else
		document.location = '#popup2';
}
</script>

<script src='http://code.jquery.com/jquery-1.9.1.min.js'></script>
<script type="text/javascript">
//INIZIO AJAX 
$(document).ready(function(e){ 
	$("#create").click(function(){
	
	/* alert(indice); *///era 0
    var url = "/edit/paziente/save2"; // the script where you handle the form input.
    $.ajax({
           type: "POST",
           url: url,
           data: $("#insForm").serialize(), // serializes the form's elements.
           success: function(response){
        	   
		        	   alert(response);//Dalla chiave messaggio di Paziente Controller
		        	   var res = response.split(",");//funzione che prende una stringa e divide in base al parametro e li numera per posizione
		        	   if(res[0]=='KO')
		        		   	alert("Inserimento fallito!");
		        	   		
		        	   else
		        		   {
		        		  /*  alert(indice); *///sempre 1
		        		/* alert(res[0]);//Ok */
		        		 /*   alert(res[1]); *///Nome Cognome
		       	   		 /*   alert(res[2]); */// Id del paziente 
		       	   		   var yy = "#fk_paziente"+indice;//  equivale a fk_paziente1
		       	   		   var xx = "#trasportato"+indice;
		            	   $(yy).val(res[2]);
		            	   $(xx).val(res[1]);
		            	   document.location = '#';
		            	   
		            	   //resetta tutto
		            	   document.insForm.reset(); 
		       	   		}
        	   		}
         		});
    	//e.preventDefault(); // avoid to execute the actual submit of the form.
		});
});
</script>
